<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <link 
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
      rel="stylesheet" 
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" 
      crossorigin="anonymous">
    <script 
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" 
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" 
      crossorigin="anonymous">
    </script>
    <title><%= title %></title>
  </head>

  <body>

    <%- include('./partials/head') %> <!-- head partial -->

    <div class="container py-5 h-100">
    <h1 class=""><%= title %></h1>
    <p class="">Welcome to <%= title %></p>
    
    <br />

      <form onsubmit="Submit()" method="POST">

        <!-- Username input -->
        <div class="form-outline mb-4">
          <label class="form-label" for="loginUsername">Username</label>
          <input
            type="text"
            name="loginUsername"
            id="loginUsername"
            class="form-control"
            value=""
            required
          />
        </div>

</style>

<script>
  function GenerateCaptcha(){
    var num1=Math.floor((Math.random()*10)+1);
    var num2=Math.floor((Math.random()*10)+1);
    document.getElementById("num1").innerHTML=num1;
    document.getElementById("num2").innerHTML=num2;
    return true;
  }
  function CheckCaptcha(){
      var num1=1*document.getElementById("num1").innerHTML;
      console.log(num1);
      var num2=1*document.getElementById("num2").innerHTML;
      console.log(num2);
      var answer=document.forms["loginform"]["captchanumber"].value;
      console.log(answer);
      if (num1+num2==answer){
          return true;
      }
      else{
          alert("Incorrect Captcha");
          GenerateCaptcha();
          loginform.reset();
          return false;
      }

  }
  </script>
</head>

<body onload="GenerateCaptcha()">
  <%- include('./partials/header') -%> <!-- includes header partial with navigation bar -->


<h2>Login Form</h2>

<form action="/login" name="loginform" id="loginform" onsubmit="return CheckCaptcha()" method="POST">

  <div class="container">
    <label for="uname"><b>Username</b></label>
    <input type="text" placeholder="Enter Username" name="uname" required>

    <label for="psw"><b>Password</b></label>
    <input type="password" placeholder="Enter Password" name="psw" required>\
    
    <div class="form-floating">
      <input type="number" class="form-control" id="captchanumber" name="captchanumber" placeholder=""  maxlength="25"
       required>
      <label for="captchanumber">Calculate <span id="num1"> 1 </span> + <span id="num2"> 2 </span> = </label>
      </div>

    <button type="submit">Login</button>
    <label>

    
    

      <input type="checkbox" checked="checked" name="remember"> Remember me
    </label>
  </div>

  <div class="container" style="background-color:#f1f1f1">
  
    <span class="psw">Forgot <a href="#">password?</a></span>
  </div>

</form>


</body>
</html>