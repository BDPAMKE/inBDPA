<!DOCTYPE html>
<html>

<head>
<%- include('./partials/head') -%>
<script>
    function GenerateCaptcha(){
      var num1=Math.floor((Math.random()*10)+1);
      var num2=Math.floor((Math.random()*10)+1);
      var html="Calculate: " + num1 + "+" + num2 + "=:";
      document.getElementById("num1").innerHTML=num1;
      document.getElementById("num2").innerHTML=num2;
      return true;
    }
    function CheckCaptcha(){
        var num1=1*document.getElementById("num1").innerHTML;
        console.log(num1);
        var num2=1*document.getElementById("num2").innerHTML;
        console.log(num2);
        var answer=document.forms["registerform"]["captchanumber"].value;
        console.log(answer);
        if (num1+num2==answer){
            return true;
        }
        else{
            alert("Incorrect Captcha");
            GenerateCaptcha();
            registerform.reset();
            return false;
        }

    }
    </script>
</head>

<body onload="GenerateCaptcha()">
<header>
<%- include('./partials/header') -%>
</header>

<div class="container my-5">
<div class="row">
<div class="col-md-6 mx-auto">

<form name="registerform" id="registerform" action="/register" onsubmit="return CheckCaptcha()" method="POST">

<h1 class="h3 mb-3 fw-normal">Please Register Below</h1>


<div class="form-floating">
<input type="text" class="form-control" id="username" name="username" placeholder="User Name"  required>
<label for="username">User Name</label>
</div>

<div class="form-floating">
<input type="email" class="form-control" id="email" name="email" placeholder="name@example.com" required>
<label for="email">Email address</label>
</div>

<div class="form-floating">
<input type="password" class="form-control" id="password" name="password" placeholder="Password"  maxlength="25" requiredlength="5"
 title="Password must be at least 11 characters 11. A strong password is above 17 characters." required>
<label for="password">Password</label>
</div>

<div class="form-floating">
    <input type="number" class="form-control" id="captchanumber" name="captchanumber" placeholder=""  maxlength="25"
     required>
    <label for="captchanumber">Calculate <span id="num1"> 1 </span> + <span id="num2"> 2 </span> = </label>
    </div>

<button class="w-100 btn btn-lg btn-primary" type="submit">Register</button>
<span class="psw">Forgot <a href="/forgotPass">password?</a></span>
</form>

</div>
</div>
</div>

<footer>
<%- include('./partials/footer') -%>
</footer>

</body>

</html>